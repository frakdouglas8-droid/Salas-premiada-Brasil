<form id="formLogin">

// Função de cadastro
document.getElementById('formCadastro')?.addEventListener('submit', function(e) {
    e.preventDefault();
    const nome = document.getElementById('nome').value;
    const email = document.getElementById('email').value;
    const telefone = document.getElementById('telefone').value;
    const senha = document.getElementById('senha').value;

    let usuarios = JSON.parse(localStorage.getItem('usuarios') || "[]");

    if (usuarios.find(u => u.email === email || u.telefone === telefone)) {
        alert("Usuário já cadastrado!");
        return;
    }

    usuarios.push({nome, email, telefone, senha, saldo: 0});
    localStorage.setItem('usuarios', JSON.stringify(usuarios));
    alert("Cadastro realizado com sucesso!");
    window.location = "index.html";
});

// Função de login
document.getElementById('formLogin')?.addEventListener('submit', function(e) {
    e.preventDefault();
    const usuario = document.getElementById('usuario').value;
    const senha = document.getElementById('senha').value;

    let usuarios = JSON.parse(localStorage.getItem('usuarios') || "[]");
    let user = usuarios.find(u => u.email === usuario || u.telefone === usuario);

    if (!user) { alert("Usuário não encontrado!"); return; }
    if (user.senha !== senha) { alert("Senha incorreta!"); return; }

    localStorage.setItem('logado', JSON.stringify(user));
    window.location = "salas.html";
});

// Recuperar senha
document.getElementById('formRecuperar')?.addEventListener('submit', function(e){
    e.preventDefault();
    const email = document.getElementById('emailRecuperar').value;
    let usuarios = JSON.parse(localStorage.getItem('usuarios') || "[]");
    let user = usuarios.find(u => u.email === email);
    if(!user){ alert("E-mail não cadastrado!"); return; }
    alert("Sua senha é: " + user.senha);
});
